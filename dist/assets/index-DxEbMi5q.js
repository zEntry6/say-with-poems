import{r as e,a as r,R as t}from"./vendor-VIHZQHJq.js";import{i as s,g as a,c as n,a as o,s as l,q as i,o as c,b as d}from"./firebase-DDmPMWK2.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&r(e)})).observe(document,{childList:!0,subtree:!0})}function r(e){if(e.ep)return;e.ep=!0;const r=function(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?r.credentials="include":"anonymous"===e.crossOrigin?r.credentials="omit":r.credentials="same-origin",r}(e);fetch(e.href,r)}}();var m={exports:{}},x={},h=e,u=Symbol.for("react.element"),y=Symbol.for("react.fragment"),g=Object.prototype.hasOwnProperty,p=h.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f={key:!0,ref:!0,__self:!0,__source:!0};function b(e,r,t){var s,a={},n=null,o=null;for(s in void 0!==t&&(n=""+t),void 0!==r.key&&(n=""+r.key),void 0!==r.ref&&(o=r.ref),r)g.call(r,s)&&!f.hasOwnProperty(s)&&(a[s]=r[s]);if(e&&e.defaultProps)for(s in r=e.defaultProps)void 0===a[s]&&(a[s]=r[s]);return{$$typeof:u,type:e,key:n,ref:o,props:a,_owner:p.current}}x.Fragment=y,x.jsx=b,x.jsxs=b,m.exports=x;var j=m.exports,N={},w=r;N.createRoot=w.createRoot,N.hydrateRoot=w.hydrateRoot;var v={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};var k=(r,t)=>{const s=e.forwardRef((({color:s="currentColor",size:a=24,strokeWidth:n=2,absoluteStrokeWidth:o,children:l,...i},c)=>{return e.createElement("svg",{ref:c,...v,width:a,height:a,stroke:s,strokeWidth:o?24*Number(n)/Number(a):n,className:`lucide lucide-${d=r,d.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,...i},[...t.map((([r,t])=>e.createElement(r,t))),...(Array.isArray(l)?l:[l])||[]]);var d}));return s.displayName=`${r}`,s};const S=k("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),T=k("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),A=k("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),C=k("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),E=k("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),L=k("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),q=k("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),P=k("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),R=()=>j.jsx("header",{className:"text-center py-16 px-4 border-b border-gray-100",children:j.jsxs("div",{className:"max-w-2xl mx-auto",children:[j.jsxs("div",{className:"flex items-center justify-center mb-6",children:[j.jsx(A,{className:"w-8 h-8 text-gray-600 mr-3"}),j.jsx("h1",{className:"text-4xl font-light text-gray-800 tracking-wide",children:"Say With Poems"})]}),j.jsx("p",{className:"text-gray-600 text-lg leading-relaxed mb-4",children:"The silence where unspoken words rest."}),j.jsx("div",{className:"w-20 h-px bg-gray-300 mx-auto"}),j.jsx("p",{className:"text-sm text-gray-500 mt-6 italic",children:'"A poem is but a sorrow folded in stanzas, cast adrift without an address, praying to be cradled by the heart it once dreamed of."'})]})}),_=n(a(s({apiKey:"AIzaSyDBvcAEE-9SQacrlNryc1s2QWcrjAbopZQ",authDomain:"sanctuary-d03cd.firebaseapp.com",projectId:"sanctuary-d03cd",storageBucket:"sanctuary-d03cd.firebasestorage.app",messagingSenderId:"651929472943",appId:"1:651929472943:web:65ed1dc620f3828c2ce95a",measurementId:"G-J4XEHSXHQP"})),"poems"),O=({onPoetryAdded:r})=>{const[t,s]=e.useState({senderName:"",recipientName:"",title:"",content:"",message:""}),[a,n]=e.useState(!1),[i,c]=e.useState(null),d=e=>{s({...t,[e.target.name]:e.target.value})},m=(e,r="success")=>{c({message:e,type:r}),setTimeout((()=>c(null)),4e3)};return j.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-12",children:[i&&j.jsx("div",{className:"mb-6 p-4 rounded-lg text-center fade-in "+("error"===i.type?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200"),children:i.message}),j.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),t.content.trim()){n(!0);try{(await(async e=>{try{return{success:!0,id:(await o(_,{...e,createdAt:l(),timestamp:Date.now()})).id}}catch(r){return console.error("Error adding poetry:",r),{success:!1,error:r.message}}})({senderName:t.senderName.trim()||"Anonymous",recipientName:t.recipientName.trim()||"To whoever finds these words.",title:t.title.trim()||"Untitled",content:t.content.trim(),message:t.message.trim()})).success?(m("The verse has found its way to the stars âœ¨"),s({senderName:"",recipientName:"",title:"",content:"",message:""}),r&&r()):m("Glitched. Frozen. A life buffering between almost and never.","error")}catch(a){m("Glitched. Frozen. A life buffering between almost and never.","error")}n(!1)}else m("A poem, even in silence, must carry something.","error")},className:"space-y-8",children:[j.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[j.jsxs("div",{children:[j.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From"}),j.jsx("input",{type:"text",name:"senderName",value:t.senderName,onChange:d,required:!0,placeholder:"Name of the sender",className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-gray-400 focus:border-transparent transition-all"})]}),j.jsxs("div",{children:[j.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To"}),j.jsx("input",{type:"text",name:"recipientName",value:t.recipientName,onChange:d,required:!0,placeholder:"For the one meant to read",className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-gray-400 focus:border-transparent transition-all"})]})]}),j.jsxs("div",{children:[j.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),j.jsx("input",{type:"text",name:"title",value:t.title,onChange:d,required:!0,placeholder:"The Name of a Poem",className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-gray-400 focus:border-transparent transition-all"})]}),j.jsxs("div",{children:[j.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Poetry"}),j.jsx("textarea",{name:"content",value:t.content,onChange:d,required:!0,placeholder:"Here is where your poem waits to be born...\r\n\r\nLet words pour forth, as rivers to their sea,\r\nAs wandering winds that tales to branches tell,\r\nAs hearts that murmur truths none else can see,\r\nIn silent shades where unmarked feelings dwell.",className:"w-full px-4 py-4 border border-gray-200 rounded-lg focus:ring-2 focus:ring-gray-400 focus:border-transparent transition-all poetry-text",rows:"8"})]}),j.jsxs("div",{children:[j.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"A Quiet Afterword"}),j.jsx("textarea",{name:"message",value:t.message,onChange:d,required:!0,placeholder:"a little message",className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-gray-400 focus:border-transparent transition-all",rows:"3"})]}),j.jsx("div",{className:"text-center",children:j.jsx("button",{type:"submit",disabled:a,className:"inline-flex items-center px-8 py-3 bg-gray-800 text-white rounded-lg hover:bg-gray-700 focus:ring-2 focus:ring-gray-400 focus:ring-offset-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:a?j.jsxs(j.Fragment,{children:[j.jsx(C,{className:"w-4 h-4 mr-2 animate-spin"}),"Releasing..."]}):j.jsxs(j.Fragment,{children:[j.jsx(q,{className:"w-4 h-4 mr-2"}),"Released To The Cosmos"]})})})]})]})},F=({text:e,searchTerm:r})=>{if(!r||!e)return e;const t=new RegExp(`(${r})`,"gi"),s=e.split(t);return j.jsx(j.Fragment,{children:s.map(((e,r)=>t.test(e)?j.jsx("span",{className:"bg-yellow-200 text-yellow-800 px-1 rounded",children:e},r):e))})},I=({poem:e,searchTerm:r})=>j.jsxs("article",{className:"bg-white border border-gray-100 shadow-sm rounded-xl p-8 hover-lift fade-in",children:[j.jsxs("div",{className:"mb-6 pb-4 border-b border-gray-50",children:[j.jsx("h3",{className:"text-xl font-medium text-gray-800 mb-2",children:e.title}),j.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between text-sm text-gray-500 space-y-1 sm:space-y-0",children:[j.jsxs("div",{className:"flex items-center",children:[j.jsx("span",{className:"font-medium",children:"From:"}),j.jsx("span",{className:"ml-2",children:j.jsx(F,{text:e.senderName,searchTerm:r})})]}),j.jsxs("div",{className:"flex items-center",children:[j.jsx("span",{className:"font-medium",children:"To:"}),j.jsx("span",{className:"ml-2",children:j.jsx(F,{text:e.recipientName,searchTerm:r})})]})]})]}),j.jsx("div",{className:"mb-6",children:j.jsx("div",{className:"poetry-text text-gray-800 text-lg leading-relaxed",children:e.content})}),e.message&&j.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:j.jsxs("p",{className:"text-gray-600 italic",children:['"',e.message,'"']})}),j.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-50",children:[j.jsxs("div",{className:"flex items-center text-xs text-gray-400",children:[j.jsx(T,{className:"w-3 h-3 mr-1"}),(e=>{if(!e)return"";let r;return r=e.seconds?new Date(1e3*e.seconds):e.toDate?e.toDate():new Date(e),r.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})(e.createdAt||e.timestamp)]}),j.jsx("div",{className:"w-8 h-px bg-gray-200"})]})]}),M=({onSearch:r,totalPoems:t})=>{const[s,a]=e.useState(""),[n,o]=e.useState(!1);e.useEffect((()=>{const e=setTimeout((()=>{r(s.trim())}),300);return()=>clearTimeout(e)}),[s,r]);return j.jsx("div",{className:"max-w-md mx-auto mb-8",children:j.jsxs("div",{className:"relative transition-all duration-300 "+(n?"transform scale-105":""),children:[j.jsxs("div",{className:"relative",children:[j.jsx(L,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 transition-colors duration-200 "+(n||s?"text-gray-600":"text-gray-400")}),j.jsx("input",{type:"text",value:s,onChange:e=>a(e.target.value),onFocus:()=>{o(!0)},onBlur:()=>{s||o(!1)},placeholder:"Sender or receiver?",className:"w-full pl-12 pr-12 py-3 border rounded-full transition-all duration-300 focus:outline-none "+(n||s?"border-gray-400 bg-white shadow-md":"border-gray-200 bg-gray-50 hover:bg-white hover:border-gray-300")}),s&&j.jsx("button",{onClick:()=>{a(""),o(!1)},className:"absolute right-4 top-1/2 transform -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600 transition-colors",children:j.jsx(P,{className:"w-4 h-4"})})]}),n&&!s&&j.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 p-3 bg-white border border-gray-200 rounded-lg shadow-lg z-10",children:[j.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"ðŸ’¡ Search tips:"}),j.jsxs("ul",{className:"text-xs text-gray-500 space-y-1",children:[j.jsx("li",{children:"â€¢ Type the sender or recipient's name."}),j.jsx("li",{children:"â€¢ No full name needed."}),j.jsx("li",{children:'â€¢ Example: "mom", "shark", "anne"'})]})]}),s&&j.jsx("div",{className:"mt-2 text-center",children:j.jsx("p",{className:"text-sm text-gray-500",children:0===t?`There was never a poem for "${s}"`:1===t?"1 poem found":`${t} poems, discovered in the quiet.`})})]})})},z=({refreshTrigger:r})=>{const[t,s]=e.useState([]),[a,n]=e.useState([]),[o,l]=e.useState(!0),[m,x]=e.useState(null),[h,u]=e.useState(""),y=e.useCallback(((e,r)=>{if(!r)return e;const t=r.toLowerCase();return e.filter((e=>e.senderName.toLowerCase().includes(t)||e.recipientName.toLowerCase().includes(t)))}),[]),g=e.useCallback((e=>{u(e);const r=y(t,e);n(r)}),[t,y]),p=async()=>{l(!0),x(null);try{const e=await(async()=>{try{const e=i(_,c("createdAt","desc")),r=await d(e),t=[];return r.forEach((e=>{t.push({id:e.id,...e.data()})})),{success:!0,poems:t}}catch(m){return console.error("Error getting poetry:",m),{success:!1,error:m.message,poems:[]}}})();if(e.success){s(e.poems);const r=y(e.poems,h);n(r)}else x("The poems refused to arrive.")}catch(e){x("Unable to carry the weight of verses.")}l(!1)};e.useEffect((()=>{p()}),[r]);const f=()=>{p()};return o?j.jsx("div",{className:"flex items-center justify-center py-16",children:j.jsxs("div",{className:"text-center",children:[j.jsx(C,{className:"w-8 h-8 text-gray-400 animate-spin mx-auto mb-4"}),j.jsx("p",{className:"text-gray-500",children:"Collecting quiet poems from the dark..."})]})}):m?j.jsx("div",{className:"text-center py-16",children:j.jsxs("div",{className:"max-w-md mx-auto",children:[j.jsx("p",{className:"text-gray-500 mb-4",children:m}),j.jsxs("button",{onClick:f,className:"inline-flex items-center px-4 py-2 text-sm text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[j.jsx(E,{className:"w-4 h-4 mr-2"}),"Give It One More Try"]})]})}):j.jsx("section",{className:"py-12",children:j.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[j.jsxs("div",{className:"text-center mb-12",children:[j.jsxs("div",{className:"flex items-center justify-center mb-4",children:[j.jsx(S,{className:"w-6 h-6 text-gray-600 mr-2"}),j.jsx("h2",{className:"text-2xl font-light text-gray-800",children:"The Room of Poems"})]}),j.jsx("p",{className:"text-gray-500 mb-6",children:h?`Search results for "${h}"`:"These words, once lost in the wind, have found their home in this quiet heart."}),j.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[j.jsx("div",{className:"w-12 h-px bg-gray-300"}),j.jsx("button",{onClick:f,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-full transition-colors",title:"Reload",children:j.jsx(E,{className:"w-4 h-4"})}),j.jsx("div",{className:"w-12 h-px bg-gray-300"})]})]}),j.jsx(M,{onSearch:g,totalPoems:a.length}),0===a.length?j.jsx("div",{className:"text-center py-16",children:j.jsxs("div",{className:"max-w-md mx-auto",children:[j.jsx(S,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),j.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:h?"Left with Nothing.":"A Poem, Not Yet Born"}),j.jsx("p",{className:"text-gray-500",children:h?`No poem was found to echo the longing behind "${h}"`:"Let your words be the first light to enter this quiet room."}),h&&j.jsx("button",{onClick:()=>g(""),className:"mt-4 text-sm text-gray-600 hover:text-gray-800 underline",children:"Explore All Poems"})]})}):j.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:a.map((e=>j.jsx(I,{poem:e,searchTerm:h},e.id)))})]})})};function D(){const[r,t]=e.useState(0);return j.jsxs("div",{className:"min-h-screen bg-white",children:[j.jsx(R,{}),j.jsxs("main",{children:[j.jsx("section",{className:"border-b border-gray-100",children:j.jsx(O,{onPoetryAdded:()=>{t((e=>e+1))}})}),j.jsx(z,{refreshTrigger:r})]}),j.jsx("footer",{className:"border-t border-gray-100 py-8",children:j.jsxs("div",{className:"max-w-4xl mx-auto px-4 text-center",children:[j.jsx("div",{className:"w-16 h-px bg-gray-300 mx-auto mb-4"}),j.jsx("p",{className:"text-sm text-gray-500",children:"For the ones who still believe that words can hold the weight of the world â€” made with â™¥"}),j.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Each poem is a bridge where souls may meet, betwixt thy heart and mine."})]})})]})}N.createRoot(document.getElementById("root")).render(j.jsx(t.StrictMode,{children:j.jsx(D,{})}));
